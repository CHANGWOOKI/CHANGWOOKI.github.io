---
title: "[SQLD] 2과목-1 정리"
toc: true
toc_sticky: true
toc_label: "Getting Started"
description: null
summary: null
tags: SQLD
published: true
categories:
  - SQLD
---

# 2과목 SQL 기본 및 활용
## 1. 관계형 데이터베이스 개요
### 데이터 베이스와 DBMS
- 데이터베이스 : 데이터의 집합
  - 형식을 갖추지 안항도 엘셀 파일을 모아둔다면 그것 또한 데이터베이스
- DMBS : 데이터를 효과적으로 관리하기 위한 시스템
  - 개인이 파일을 여러 개 묶어서 폴더에 보관하면 테이터를 찾고 괸라하는데 많은 비용이 발생
  - 시스템적으로 작동하게 만든 시스템을 DBMS라고 한다 (ORACLE, MYSQL)
  - 관계형 데이터베이스 테이블 끼리 관계를 가지고있다.

### 관계형 데이터베으스 구성 요소
- 계정 : 데이터의 접근 제한을 위한 여러 업무별/시스템별 계정이 존재
  - (계정별 권한을 가진다.)
- 테이블 : DBMS의 DB 안에서 데이터가 저장되는 형식
- 스키마 : 데이터베이스 설계도라고 생각하면 된다.
  - 엔티티, 속성, 관계를 어떻게 정의하는지, 유지해야 할 제약 조건을 기술한 것이 스키마다.

### 테이블
#### 테이블 정의
- 행과 열을 갖는 2차원 구조로 구성
- 데이터를 입력하여 저장하는 최소 단위
- 컬럼은 속성이라고 부름(모델링 별 용어가 다름)
#### 테이블 특징
- 하나의 테이블은 반드시 하나의 유저(계정) 소유여야 한다.
- 테이블간 관계는 1:1, 1:N, N:N 관계를 가질 수 있음
- 테이블명은 중복될 수 없지만, 소유자가 다른 경우 같은 이름으로 생성 가능
  - ex) SCOTT 소유의 EMP 테이블 존재, HR 소유의 EMP 테이블 존재
  - 같은 계정 내 동일한 객체명 생성 불가
- 테이블은 행 단위로 데이터가 입력, 삭제되며 수정은 값 단위로 가능

### SQL
- 관계형 데이터베이스에서 DBMS 시스템 괸리 기능을 명령하는 언어
- 데이터 정의(DDL), 데이터 조작(DML), 데이터 제어 언어(DCL) 등으로 구분
- SQL 문법은 대,소문자를 구분하지 않음

### 관계형 데이터베이스 특징
- 데이터의 분류, 정렬, 탐색 속도가 빠름
- 신뢰성이 높고, 데이터의 무결성 보장
- 기존의 작성된 스키마를 수정하기 어려움
- 데이터베이스의 부하를 분석하는 것이 어려움

### 데이터의 무결성
- 데이터의 정확성과 일관성을 유지하고, 데이터의 결손과 부정합이 없을을 보증하는 것
- 데이터베이스에 저장된 값과 그것이 표현하는 현실의 비즈니스 모델의 값이 일치하는 정확성을 의미
- 데이터의 무결성을 유지하는 것이 DMBS에 중요한 기능

### 데이터 무결성 종류
- 개체 무결성 : 테이블의 기본키를 구성하는 속성은 NULL 값이나 중복 값을 가질 수 없음
- 참조 무결성 : 외래키 값은 NULL이거나 참조 테이블의 기본키 값과 동일해야 한다.
  - 외래키는 참조 테이블의 기본키에 정의된 데이터만 허용
- 도메인 무결성 : 주어진 속성 값이 정의된 도메인에 속한 값
  - 주어진 범위 값만 허용
- NULL 무결성(NOT NULL) : 특정 속성에 대해 NULL을 허용하지 않는 특징
- 고유 무결성(UNIQUE) : 고유 속성에 대해 값이 중복되지 않는 특징
- 키 무결성 : 하나의 릴레이션(관계)에는 적어도 하나의 키가 존재해야 함
  - 테이블이 서로 관계를 가질 경우 반드시 하나 이상의 조인키를 가짐

### ERD(Entity Relationship Diagran)
- ERD란 테이블 간 서로의 상관 관계를 그림을 표현한 것
- ERD의 구성요소에는 엔터티, 관계, 속성이 있다.
  - 현실 세계의 데이터는 이 3가지 구성으로 모두 표현 가능

## 2. SELECT 문
### SQL 종류
#### DDL - Data Definition Language
 테이블(객체)을 만들고 정의하는 명령어다. AUTO COMMIT이므로 되돌릴 수 없다.
- CREATE : 테이블을 생성
- ALTER : 테이블을 수정
- DROP : 테이블 삭제
- TRUNCATE : 테이블의 구조는 그대로 두고 데이터만 지움 (AUTO COMMIT 주의)
#### DML - Data Manipulation Language
테이블의 행을 정의하는 명령어(수동 COMMIT이므로 ROLLBACK 가능)
- INSERT - 테이블의 행을 추가
- UPDATE - 테이블의 행을 수정
- DELETE - 테이블의 행을 수정
- MERGE
#### DCL - Data Control Language
데이터베이스에 대한 권한을 제어하는데 사용
- GRANT - 권한을 부여
- REVOKE - 권한을 회수
#### TCL - Transaction Control Language
데이터베이스 트랜잭션을 관리하는 데 사용
- COMMIT - 트랜잭션에서 수행된 변경 사항을 영구적으로 저장
- ROLLBACK - 트랜잭션에서 수행된 변경 사항을 취소
- SAVEPOINT: 트랜잭션 내에서 특정 지점을 저장
#### DQL - Data Query Language
데이터베이스에서 데이터를 조회하는 명령어
- SELECT - 테이블에서 데이터를 조회합니다

### SELETE문 구조
```sql
SELECT * --컬럼명
FROM 테이블명 OR 뷰명
WHERE 조회 조건
GROUP BY 그룹핑 컬럼명
HAVING 그룹핑 필터링 조건
ORDER BY 정령 컬럼명
```
- 6개 절로 구성되어 각 절의 순서대로 작성해야 한다.
- 문법 순서와 실행 순서는 다름
- FROM > WHERE > GROUP BY > HAVING > SELECT > ORDER BY 순서대로 실행된다.

### SELECT 절
- SELECT문장을 사용해 불러올 컬럼명, 연산 결과를 작성하는 절
- *를 사용해서 테이블 전체 컬럼명을 불러올 수 있음
- , 로 나열하여 작성 가능 (순서대로 출력)
- Alias(별칭) 사용 가능하다.
  - Alias는 SELECT 보다 늦게 수행되는 ORDER BY절에서만 재사용 가능
  - 예약어는 별칭으로 불가
  - 공백, 특수문자(_제외), 대소문자를 그대로 출력할 때는 ""(쌍따옴표) 전달해야 한다.

### FROM 절
- 데이터를 불러올 테이블명 OR 뷰명
- 테이블 여러 개 전달 가능 (,로 구분)
  - 조인 조건 없이 테이블명만 나열 시 카티시안 곱 발생 주의
- 테이블 별칭 선언 가능(AS는 사용 X)
  - 테이블 별칭 선언 시 구분자는 테이블 별칭으로만 전달
  - 별칭 선언 후 테이블명 사용시 에러 발생
- ORACLE에서 FROM절 생략 시 DUAL 테이블선언 (최신 버전은 생략 가능)
- MYSQL에서 FROM절 생략 가능

### 함수 정의
- input value가 있을 경우 그에 맞는 output value를 출력해주는 객체
- input value 와 output value의 관계를 정의한 객체
- FROM 절을 제외한 모든 절에서 사용 가능

### 함수의 기능
- 기본적인 쿼리문을 더 강력하게 해줌
- 데이터의 계산을 수행
- 개별 데이터의 항목을 수정
- 표시할 날짜 및 숫자 형식을 지정
- 열 데이터 유형(data type)을 변환

### 함수의 종류
- 단일행 함수
  - input 과 output이 1:1 관계
  - 하나의 값만 넣고 리턴
- 복수행 함수
  - 여러 건의 데이터를 동시에 입력 받아 하나의 요약 값을 리턴
  - 그룹함수 OR 집계함수라고도 한다.

### 입/출력 값의 타입에 따른 함수 분류
#### 문자열 함수
문자열 입력 시 문자열이나 숫자 반환 
- LOWER, UPPER, LENGTH(대상) : 소문자, 대문자, 문자열 길이
  - ex) LOWER(NAME)
- CONCAT(대상1, 대상2) : 문자열 결합 
  - ex) CONCAT(FIRST_NAME, LAST_NAME)
- SUBSTR(대상, A, B) : 문자열 부분 추출 
  - 대상에 A번 째 위치에서 B개의 문자열 추출
- INSTR("A#B#C#", "찾을문자열", 시작위치, 몇번째 발견) : 문자열 위치 반환
  - ex) INSTR("A#B#C#", "#", 3, 2) : 출력 6
  - "A#B#C#"에서 "#"을 찾는데 3번 째 위치에서 2번 째 "#"이 발견되는 위치
- LTRIM, RTRIM, TRIM(대상, 문자열) : 왼쪽 공백 제거, 오른쪽 공백 제거, 양쪽 공백 제거(대상만 지정하면 공백 제거)
  - LTRIM("AACDAA", "A") : 출력 "CDAA"
  - TRIM은 ORACLE에서 공백만 삭제 가능
- LPAD, RPAD(대상, n, 추가할 문자열) : 왼쪽, 오른쪽에 문자열 추가하여 n의 길이 리턴
  - LPAD("ABC", 6, "H") : 출력 HHHABC
- REPLACE, TRANSLATE(대상, 찾을문자열, 치환 문자열) : 문자열 치환 및 삭제, 글자를 1:1로 치환
  - REPLACE("ABBA", "AB", "ab") : 출력 "abBA"
    - 치환 문자열이 빈문자열 전달 시 찾을 문자열 삭제
  - TRANSLATE("ABBA", "AB", "ab") : 출력 "abba"
    - 치환 문자열이 빈문자열 전달 시 NULL 리턴

#### 숫자형 함수
- ABS(숫자): 절대값 반환
- SIGN(숫자) : 숫자가 양수면 1, 음수면 -1, 0이면 0 반환 
- MOD(숫자1, 숫자2) : 나머지, 연산자 ’%’로 대체 가능함 
- ROUND, TRUNC(숫자, 자리수) : 숫자에서 특정 자리에서 반올림, 버림
  - ROUND(123.45, 2) : 출력 123.46
  - TRUNC(123.45, -2) : 출력 100
- FLOOR, CEIL(숫자) : 최대 정수, 최소 정수 리턴
- POWER(x, y) : x의 y 거듭제곱
- SQRT(숫자) : 루트값 리턴

#### 날짜형 함수 
- SYSDATE : 현재 시각 출력 (년, 월, 일, 시, 분, 초) 
- CURRENT_DATE : 현재 날짜 리턴(년, 월, 일)
- NEXT_DAY(날짜, n) : 지정된 요일 첫 날짜 출력
- LAST_DAT(날짜) : 주어진 월에 마지막 날짜 리턴

#### 변환형 함수: 데이터 타입 변환, 명시적 형 변환 방식 
- TO_NUMBER, TO_CHAR, TO_DATE (Oracle): 문자열을 숫자로, 숫자나 날짜를 문자열로, 문자열을 날짜로 
- CAST, CONVERT (SQL Server)

#### NULL 관련 함수 
- NVL(칼럼,값) : NULL 값 변환 
- NVL2(칼럼,값,값) : NULL이면 앞의 값 아니면 뒤의 값 출력 
- NULLIF(값,값) : 같으면 NULL 다르면 첫 값 출력 
- COALESCE(값,값,…) : NULL이 아닌 첫 값 출력 
- ISNULL(칼럼,값) : NULL이면 값으로 대치 아니면 칼럼 값 출력 
